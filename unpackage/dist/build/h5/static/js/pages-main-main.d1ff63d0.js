(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-main-main"],{"0333":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"example-body",class:[t.horn.length>0?"":"isHorn"]},[i("uni-notice-bar",{attrs:{"show-icon":!0,scrollable:!0,single:!0,text:t.horn}})],1),i("v-uni-view",{staticClass:"message-list"},[i("wkiwi-action",{attrs:{options:t.options,messagesList:t.messages,fNotice:t.fNotice}})],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"23bc":function(t,e,i){"use strict";i.r(e);var n=i("0333"),a=i("3914");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("288f");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"05e20e0f",null);e["default"]=r.exports},2564:function(t,e,i){"use strict";(function(t){var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("f499"));i("6b54"),i("c5f6");var o=n(i("c016")),s={name:"swipe-action",props:{options:Array,messagesList:Array,fNotice:Number},components:{avatorGroup:o.default},data:function(){var t="Uni_".concat(Math.ceil(1e6*Math.random()).toString(36));return{elId:t,transformX:"translateX(0px)",messageIndex:-1}},created:function(){this.direction="",this.startX=0,this.startY=0,this.btnGroupWidth=0,this.isMoving=!1},mounted:function(){this.getSize()},methods:{mainMsg:function(t){this.$store.state.socket.CurrentToUser={id:0,type:"sys"},this.$store.state.socket.noreadnum-=t,this.$store.commit("set_noreadnum",0);var e={type:0,i:-1};uni.$emit("main_chatChange",e),uni.navigateTo({url:"msg"})},toMessageDetail:function(e,i){this.$store.state.socket.CurrentToUser=i,t.log(this.$store.state.socket.CurrentToUser),this.$store.state.socket.noreadnum-=i.cts,this.$store.commit("set_noreadnum",0);var n={type:1,i:e};uni.$emit("main_chatChange",n),t.log(i),i.groupname=i.username;var o=(0,a.default)(i);"friend"==i.type?uni.navigateTo({url:"../msg/msg?it="+o}):(this.$store.state.socket.CurrentToUser.id=i.gid,t.log(o),uni.navigateTo({url:"../msg/groupMsg?it="+o}))},getSize:function(){var t=this;uni.createSelectorQuery().in(this).select("#".concat(this.elId)).boundingClientRect().exec(function(e){t.btnGroupWidth=e[0].width})},bindClickBtn:function(e,i){this.messageIndex=-1,t.log(e.text+"message第"+i+"项"),"删除"==e.text&&this.messagesList.splice(i,1),t.log(this.messagesList)},touchStart:function(e){t.log(e.currentTarget.dataset.disabled),!0!==e.currentTarget.dataset.disabled&&(this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY)},touchMove:function(t){if("Y"!==this.direction&&!0!==t.currentTarget.dataset.disabled){var e=t.touches[0].pageY-this.startY,i=t.touches[0].pageX-this.startX;!this.isMoving&&Math.abs(e)>Math.abs(i)||Math.abs(e)>100||Math.abs(i)<50?this.direction="Y":(this.direction=i>0?"right":"left",this.messageIndex=i<0?t.currentTarget.dataset.index:-1,this.isMoving=!0)}else this.direction=""},touchEnd:function(t){this.isMoving=!1,"right"===this.direction||"left"===this.direction?("right"==this.direction&&(this.messageIndex=-1),this.endMove(t)):this.direction=""},endMove:function(e){t.log(e.currentTarget.dataset.disabled),"Y"!==this.direction&&!0!==e.currentTarget.dataset.disabled?(-1!==this.messageIndex?(this.transformX="translateX(".concat(-this.btnGroupWidth,"px)"),this.$emit("opened")):(this.transformX="translateX(0px)",this.$emit("closed")),this.direction=""):this.direction=""}}};e.default=s}).call(this,i("5a52")["default"])},"288f":function(t,e,i){"use strict";var n=i("5546"),a=i.n(n);a.a},"2af3":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".uni-noticebar[data-v-29e1e310]{\n\tdisplay:-webkit-box;display:-webkit-flex;display:flex;width:100%;box-sizing:border-box;\n\t-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:6px 12px;margin-bottom:10px}.uni-noticebar-close[data-v-29e1e310]{margin-right:5px}.uni-noticebar-icon[data-v-29e1e310]{margin-right:5px}.uni-noticebar__content-wrapper[data-v-29e1e310]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;overflow:hidden}.uni-noticebar__content-wrapper--single[data-v-29e1e310]{\n\tline-height:18px\n\t}.uni-noticebar__content-wrapper--scrollable[data-v-29e1e310],.uni-noticebar__content-wrapper--single[data-v-29e1e310]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.uni-noticebar__content--scrollable[data-v-29e1e310]{\n\t\n\t-webkit-box-flex:1;-webkit-flex:1;flex:1;display:block;overflow:hidden\n\t}.uni-noticebar__content--single[data-v-29e1e310]{\n\tdisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:0;-webkit-flex:none;flex:none;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center\n\t}.uni-noticebar__content-text[data-v-29e1e310]{font-size:14px;line-height:18px;\n\tword-break:break-all\n\t}.uni-noticebar__content-text--single[data-v-29e1e310]{\n\t\n\tdisplay:inline-block;width:100%;white-space:nowrap;\n\toverflow:hidden;text-overflow:ellipsis}.uni-noticebar__content-text--scrollable[data-v-29e1e310]{\n\t\n\tdisplay:inline-block;white-space:nowrap;padding-left:100%;-webkit-animation:notice-data-v-29e1e310 10s 0s linear infinite both;animation:notice-data-v-29e1e310 10s 0s linear infinite both;-webkit-animation-play-state:paused;animation-play-state:paused\n\t}.uni-noticebar__more[data-v-29e1e310]{\n\tdisplay:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;\n\t-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-left:5px}.uni-noticebar__more-text[data-v-29e1e310]{font-size:14px}@-webkit-keyframes notice-data-v-29e1e310{to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes notice-data-v-29e1e310{to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}",""])},"2cee":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"message-list"},[i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mainMsg(t.fNotice)}}},[i("v-uni-view",{staticClass:"item-left"},[i("v-uni-view",{staticClass:"avator"},[i("v-uni-view",{staticClass:"iconfont ic_system-news"})],1)],1),i("v-uni-view",{staticClass:"item-middle"},[i("v-uni-text",{staticClass:"title"},[t._v("好友通知")])],1),i("v-uni-view",{staticClass:"item-right"},[t.fNotice>0?i("v-uni-view",{staticClass:"mark"},[t._v(t._s(t.fNotice))]):t._e()],1)],1),t._l(t.messagesList,function(e,n){return[i("v-uni-view",{key:n+"_0",staticClass:"uni-swipe-action"},[i("v-uni-view",{staticClass:"uni-swipe-action__container",style:{transform:t.messageIndex==n?t.transformX:"translateX(0px)","-webkit-transform":t.messageIndex==n?t.transformX:"translateX(0px)"},attrs:{"data-index":n,"data-disabled":e.disabled},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-swipe-action__content ",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toMessageDetail(n,e)}}},[i("v-uni-view",{staticClass:"item",class:"group"==e.type?"stick":""},[i("v-uni-view",{staticClass:"item-left"},[i("avator-group",{class:["offline"==e.status?"hui":""],attrs:{avator:e.avatar,text:e.username}})],1),i("v-uni-view",{staticClass:"item-middle"},[i("v-uni-text",{staticClass:"title"},[t._v(t._s(e.username))]),i("v-uni-text",{staticClass:"message"},[t._v(t._s(e.content))])],1),i("v-uni-view",{staticClass:"item-right"},[e.cts>0?i("v-uni-view",{staticClass:"mark"},[t._v(t._s(e.cts))]):t._e(),i("v-uni-view",{staticClass:"time"},[t._v(t._s(e.time))])],1)],1)],1),i("v-uni-view",{staticClass:"uni-swipe-action__btn-group",attrs:{id:t.elId}},t._l(t.options,function(e,a){return i("div",{key:a,staticClass:"uni-swipe-action--btn",style:{backgroundColor:e.style&&e.style.backgroundColor?e.style.backgroundColor:"#C7C6CD",color:e.style&&e.style.color?e.style.color:"#FFFFFF",fontSize:e.style&&e.style.fontSize?e.style.fontSize:"28upx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.bindClickBtn(e,n)}}},[t._v(t._s(e.text))])}),0)],1)],1)]})],2)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},3100:function(t,e,i){"use strict";i.r(e);var n=i("3522"),a=i("c426");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("cc5a");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"29e1e310",null);e["default"]=r.exports},3522:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("v-uni-view",{staticClass:"uni-noticebar",style:{backgroundColor:t.backgroundColor},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[!0===t.showClose||"true"===t.showClose?i("uni-icons",{staticClass:"uni-noticebar-close",attrs:{type:"closefill",color:t.color,size:"12"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}):t._e(),!0===t.showIcon||"true"===t.showIcon?i("uni-icons",{staticClass:"uni-noticebar-icon",attrs:{type:"sound",color:t.color,size:"14"}}):t._e(),i("v-uni-view",{ref:"textBox",staticClass:"uni-noticebar__content-wrapper",class:{"uni-noticebar__content-wrapper--scrollable":t.scrollable,"uni-noticebar__content-wrapper--single":!t.scrollable&&(t.single||t.moreText)}},[i("v-uni-view",{staticClass:"uni-noticebar__content",class:{"uni-noticebar__content--scrollable":t.scrollable,"uni-noticebar__content--single":!t.scrollable&&(t.single||t.moreText)},attrs:{id:t.elIdBox}},[i("v-uni-text",{ref:"animationEle",staticClass:"uni-noticebar__content-text",class:{"uni-noticebar__content-text--scrollable":t.scrollable,"uni-noticebar__content-text--single":!t.scrollable&&(t.single||t.moreText)},style:{color:t.color,width:t.wrapWidth+"px",animationDuration:t.animationDuration,"-webkit-animationDuration":t.animationDuration,animationPlayState:t.webviewHide?"paused":t.animationPlayState,"-webkit-animationPlayState":t.webviewHide?"paused":t.animationPlayState,animationDelay:t.animationDelay,"-webkit-animationDelay":t.animationDelay},attrs:{id:t.elId}},[t._v(t._s(t.text))])],1)],1),!0===t.showGetMore||"true"===t.showGetMore?i("v-uni-view",{staticClass:"uni-noticebar__more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickMore.apply(void 0,arguments)}}},[t.moreText?i("v-uni-text",{staticClass:"uni-noticebar__more-text",style:{color:t.moreColor}},[t._v(t._s(t.moreText))]):t._e(),i("uni-icons",{attrs:{type:"arrowright",color:t.moreColor,size:"14"}})],1):t._e()],1):t._e()},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},3914:function(t,e,i){"use strict";i.r(e);var n=i("83c2"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"397b":function(t,e,i){"use strict";var n=i("880f"),a=i.n(n);a.a},4766:function(t,e,i){var n=i("2af3");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("559d657a",n,!0,{sourceMap:!1,shadowMode:!1})},5546:function(t,e,i){var n=i("b6a0");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("40cde54f",n,!0,{sourceMap:!1,shadowMode:!1})},"5df3":function(t,e,i){"use strict";var n=i("02f4")(!0);i("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},6990:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac6a"),i("5df3");var a=n(i("795b"));i("6b54"),i("c5f6");var o=n(i("32eb")),s={name:"UniNoticeBar",components:{uniIcons:o.default},props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#fffbe8"},speed:{type:[String,Number],default:100},color:{type:String,default:"#de8c17"},moreColor:{type:String,default:"#999999"},single:{type:[String,Boolean],default:!1},scrollable:{type:[String,Boolean],default:!1},showIcon:{type:[String,Boolean],default:!1},showGetMore:{type:[String,Boolean],default:!1},showClose:{type:[String,Boolean],default:!1}},data:function(){var t="Uni_".concat(Math.ceil(1e6*Math.random()).toString(36)),e="Uni_".concat(Math.ceil(1e6*Math.random()).toString(36));return{textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:t,elIdBox:e,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}},mounted:function(){var t=this;this.$nextTick(function(){t.initSize()})},methods:{initSize:function(){var t=this;if(this.scrollable){var e=[],i=new a.default(function(e,i){uni.createSelectorQuery().in(t).select("#".concat(t.elId)).boundingClientRect().exec(function(i){t.textWidth=i[0].width,e()})}),n=new a.default(function(e,i){uni.createSelectorQuery().in(t).select("#".concat(t.elIdBox)).boundingClientRect().exec(function(i){t.boxWidth=i[0].width,e()})});e.push(i),e.push(n),a.default.all(e).then(function(){t.animationDuration="".concat(t.textWidth/t.speed,"s"),t.animationDelay="-".concat(t.boxWidth/t.speed,"s"),setTimeout(function(){t.animationPlayState="running"},1e3)})}},loopAnimation:function(){},clickMore:function(){this.$emit("getmore")},close:function(){this.show=!1,this.$emit("close")},onClick:function(){this.$emit("click")}}};e.default=s},"83c2":function(t,e,i){"use strict";(function(t){var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("55dd");var a=n(i("cebc")),o=i("2f62"),s=n(i("852f")),r=n(i("855c")),c=n(i("3100")),l={computed:(0,o.mapState)(["forcedLogin","hasLogin","userName","s_token"]),components:{wkiwiAction:r.default,uniNoticeBar:c.default},data:function(){return{userList:[],groupList:[],indexList:[],isLoad:!1,horn:"rt",fNotice:0,options:[{text:"删除",style:{backgroundColor:"#dd524d"}}],messages:[{id:0,username:"暂无会话, 选择好友一起聊天吧",avatar:"",content:"",time:"",cts:0,status:"online",disabled:!1,type:"friend"}]}},onLoad:function(){this.horn=this.$store.state.socket.horn,this.getnewsList(),uni.$on("main_infoList",this.addChatList),uni.$on("main_chatChange",this.chatChange)},onUnload:function(){uni.$off()},onShow:function(){this.horn=this.$store.state.socket.horn},onPullDownRefresh:function(){uni.showNavigationBarLoading(),this.getnewsList()},methods:(0,a.default)({},(0,o.mapMutations)(["logout"]),{playMusic:function(t){audioClass.play(t)},goItem:function(t){0!=t.gid||""!=t.gid?uni.navigateTo({url:"chat?groupid="+t.groupid}):uni.navigateTo({url:"pm?uuid="+t.touserid})},getnewsList:function(){var t=this;this.hasLogin?this.$store.dispatch("initWs"):uni.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!this.forcedLogin,success:function(e){e.confirm&&(t.forcedLogin?uni.reLaunch({url:"../login/login"}):uni.navigateTo({url:"../login/login"}))}}),uni.hideNavigationBarLoading(),uni.stopPullDownRefresh()},addChatList:function(e){if(0==e.isSys){if(1==e.iscc){var i="",n=(i="sto_"+e.type+this.$store.state.socket.mine.id+"0"+e.id,uni.getStorageSync(i));n.length<1?n=[]:n.length>19&&n.shift(),n.push(e),uni.setStorage({key:i,data:n,success:function(){}})}var a=0;this.messages.length>0&&0===this.messages[0].id&&this.messages.shift();for(var o=0;o<this.messages.length;o++)this.messages[o].id==e.id&&this.messages[o].type==e.type&&"friend"==e.type?(this.messages[o].username=e.username,this.messages[o].avatar=e.avatar,this.messages[o].content=1==e.msg_type?"图片":e.content.text,this.messages[o].time=s.default.getdateGs(e.timestamp),this.messages[o].timestamp=e.timestamp,void 0==e.cts?this.messages[o].cts+=1:this.messages[o].cts=0,a=1):"group"==e.type&&this.messages[o].type==e.type&&this.messages[o].id==e.gid&&(this.messages[o].content=1==e.msg_type?"图片":e.content.text,this.messages[o].time=s.default.getdateGs(e.timestamp),this.messages[o].timestamp=e.timestamp,void 0==e.cts?this.messages[o].cts+=1:this.messages[o].cts=0,a=1);if(0===a){var r={};r="friend"==e.type?{id:e.id,username:e.username,avatar:e.avatar,content:1==e.msg_type?"图片":e.content.text,time:s.default.getdateGs(e.timestamp),timestamp:e.timestamp,cts:void 0==e.cts?1:e.cts,status:"online",disabled:!1,type:e.type}:{id:void 0==e.gid?e.id:e.gid,gid:void 0==e.gid?e.id:e.gid,groupname:e.groupname,username:e.groupname,avatar:e.avatar,content:1==e.msg_type?"图片":e.content.text,time:s.default.getdateGs(e.timestamp),timestamp:e.timestamp,cts:void 0==e.cts?1:e.cts,status:"online",disabled:!1,type:e.type},this.messages.unshift(r)}this.messages.sort(this.sortBy("timestamp"))}else this.fNotice+=e.count,t.log(e)},chatChange:function(t){1==t.type?this.messages[t.i].cts=0:this.fNotice=0},sortBy:function(t,e){return e=void 0==e?-1:e?-1:1,function(i,n){return i=i[t],n=n[t],i<n?-1*e:i>n?1*e:0}}})};e.default=l}).call(this,i("5a52")["default"])},"852f":function(t,e,i){"use strict";(function(t){var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("f499"));i("a481");var o=n(i("e814"));i("28a5");n(i("ccf2"));function s(t){for(var e=(t+"").split(""),i=0;i<13;i++)e[i]||(e[i]="0");t=1*e.join("");var n=6e4,a=60*n,s=24*a,r=30*s,c=(new Date).getTime(),l=c-t;if(l<0)return"不久前";var u=l/r,d=l/(7*s),f=l/s,h=l/a,p=l/n,g=function(t){return t<10?"0"+t:t};return u>12?function(){var e=new Date(t);return e.getFullYear()+"年"+g(e.getMonth()+1)+"月"+g(e.getDate())+"日"}():u>=1?(0,o.default)(u)+"月前":d>=1?(0,o.default)(d)+"周前":f>=1?(0,o.default)(f)+"天前":h>=1?(0,o.default)(h)+"小时前":p>=1?(0,o.default)(p)+"分钟前":"刚刚"}function r(){var t=getCurrentPages(),e=t[t.length-1];return e.$getAppWebview()}function c(t){var e=r();e.setStyle({titleNView:t})}function l(t){}function u(t){var e=uni.getStorageSync("_app1231_webview.js");if(!t&&e)return e;var i="https://file.help-itool.com/Content/JavaScript/webview.js",n=i.split("/"),a="_downloads/20195/"+n[n.length-1];return plus.io.resolveLocalFileSystemURL(a,function(e){t&&e.remove(function(){var t=plus.downloader.createDownload(i,{filename:a},function(t,e){uni.setStorageSync("_app1231_webview.js",a)});t.start()})},function(t){var e=plus.downloader.createDownload(i,{filename:a},function(t,e){uni.setStorageSync("_app1231_webview.js",a)});e.start()}),a}function d(t,e,i){}function f(t,e){}function h(t){var e;e=new Date(Date.parse(t.replace(/-/g,"/")));var i=e.getHours(),n=e.getMinutes();return n<10&&(n="0"+n),p(i,e)+" "+i+":"+n}function p(t,e){t=e.getHours(),e.getMinutes();var i=e.getYear(),n=e.getMonth()+1,a=e.getDate(),o=new Date,s=o.getYear(),r=o.getMonth()+1,c=o.getDate();if(i==s&&n==r&&a==c)return t<6?"凌晨":t<9?"早上":t<12?"上午":t<14?"中午":t<17?"下午":t<19?"傍晚":t<22?"晚上":"夜里";var l=o.getTime()-e.getTime(),u=Math.floor(l/31104e6),d=l%31104e6,f=Math.floor(d/2592e6),h=d%2592e6,p=Math.floor(h/864e5);if(!(0==u&&0==f&&p>0&&p<7))return 0==f&&0==u&&0==p?"昨天":(f<10&&(f="0"+f),p<10&&(p="0"+p),0==u?f+"-"+p:"20"+u+"-"+f+"-"+p);switch(p){case 1:return"昨天";case 2:return"前天";default:return"星期"+"日一二三四五六".charAt(e.getDay())}}function g(t,e){var i={text:t.message,length:t.len};if(t.parameter)for(var n in t.parameter)i[n]=t.parameter[n];return{type:"user",msg:{id:0,time:t.time,type:t.type,userinfo:{uid:e,username:t.title,face:t.url[0]},content:i}}}function m(t,e){for(var i=Math.ceil(5164789*(Math.random()+1))*(new Date).getTime()+"",n=i.substring(i.length-10,i.length-3)-0,a=0;a<t.length;a++)uni.uploadFile({url:Global.Global.Uploader+"?primaryKey="+n,filePath:t[a],success:function(t){var i=JSON.parse(t.data);e&&e(i.primaryKey,i.filePath)}});return n}function v(e,i){m(i,function(i,n){t.log(i),t.log((0,a.default)(n));var o={text:Global.Global.FileService+n[0]};e.sendMsg(o,"img")})}function b(e,i,n){m([n],function(n,o){t.log(n),t.log((0,a.default)(o));var s={text:Global.Global.FileService+o[0],length:i};e.sendMsg(s,"voice")})}var w={timeForm:h,SesstionMsgForm:g,SetSesstion:function(t){uni.setStorageSync("sesstion_context",(0,a.default)(t))},GetSesstion:function(){var t=uni.getStorageSync("sesstion_context");return t?JSON.parse(t):[]},SetChatMsg:function(t,e){var i=t.msg.userinfo.uid+Global.UserInfo().id;e&&(i=e+Global.UserInfo().id);var n=uni.getStorageSync(i),o=[];n?(o=JSON.parse(n),o.push(t)):o.push(t),uni.setStorageSync(i,(0,a.default)(o))},GetChatMsg:function(t){var e=t+Global.UserInfo().id,i=uni.getStorageSync(e);return i?JSON.parse(i):[]},SendImgs:v,SendVoice:b,Uploader:m,SetBadge:d,SetRedDot:f,GetWevViewJSPath:u,SetFixBottom:l,SetTitleNView:c,getdateGs:s};e.default=w}).call(this,i("5a52")["default"])},"855c":function(t,e,i){"use strict";i.r(e);var n=i("2cee"),a=i("9e3e");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("397b");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"482eaaee",null);e["default"]=r.exports},"880f":function(t,e,i){var n=i("8ecd");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("93841cda",n,!0,{sourceMap:!1,shadowMode:!1})},"8ecd":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";.uni-swipe-action[data-v-482eaaee]{width:100%;overflow:hidden}.uni-swipe-action__container[data-v-482eaaee]{background-color:#fff;width:200%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-transition:-webkit-transform .35s cubic-bezier(.165,.84,.44,1);transition:-webkit-transform .35s cubic-bezier(.165,.84,.44,1);transition:transform .35s cubic-bezier(.165,.84,.44,1);transition:transform .35s cubic-bezier(.165,.84,.44,1),-webkit-transform .35s cubic-bezier(.165,.84,.44,1)}.uni-swipe-action__content[data-v-482eaaee]{width:50%}.uni-swipe-action__btn-group[data-v-482eaaee]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.uni-swipe-action--btn[data-v-482eaaee]{padding:0 %?32?%;color:#fff;background-color:#c7c6cd;font-size:%?28?%;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;text-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.item[data-v-482eaaee]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?10?% %?16?%;background-color:#fff;border-bottom:1px solid #f3f3f3}.item.stick[data-v-482eaaee]{background-color:rgba(243,236,221,.5)}.item .item-left[data-v-482eaaee]{text-align:center}.item .item-left .image[data-v-482eaaee]{width:%?100?%;height:%?100?%;border-radius:%?50?%;background-color:#eee}.item .item-left .avator[data-v-482eaaee]{width:%?100?%;height:%?100?%;text-align:center;line-height:%?100?%;background:#4191ea;border-radius:50%;overflow:hidden}.item .item-left .avator .iconfont[data-v-482eaaee]{width:%?100?%;height:%?100?%;text-align:center;line-height:%?100?%;color:#fff;font-size:%?40?%}.item .item-middle[data-v-482eaaee]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;margin-left:%?15?%;overflow:hidden}.item .item-middle .title[data-v-482eaaee]{width:100%;color:#000;font-family:微软雅黑;font-weight:400;font-size:%?30?%;height:%?50?%;line-height:%?60?%;overflow:hidden;\n      /*自动隐藏文字*/text-overflow:ellipsis;\n      /*文字隐藏后添加省略号*/white-space:nowrap\n      /**强制不换行*/}.item .item-middle .message[data-v-482eaaee]{width:100%;font-family:微软雅黑;color:grey;height:%?50?%;line-height:%?40?%;font-size:%?24?%;overflow:hidden;\n      /**自动隐藏文字*/text-overflow:ellipsis;\n      /**文字隐藏后添加省略号*/white-space:nowrap\n      /**强制不换行*/}.item .item-right[data-v-482eaaee]{overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.item .item-right .time[data-v-482eaaee]{color:grey;font-size:%?18?%;height:%?60?%;line-height:%?60?%}.item .item-right .mark[data-v-482eaaee]{background-color:#f74c31;line-height:%?35?%;text-align:center;font-size:%?18?%;min-width:%?35?%;min-height:%?35?%;border-radius:%?18?%;color:#fff}.hui[data-v-482eaaee]{-webkit-filter:grayscale(100%);filter:grayscale(100%)}',""])},"9e3e":function(t,e,i){"use strict";i.r(e);var n=i("2564"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},b6a0:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".isHorn[data-v-05e20e0f]{display:none}",""])},c016:function(t,e,i){"use strict";i.r(e);var n=i("cfa5"),a=i("fcbf");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("c02c");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"48c83922",null);e["default"]=r.exports},c02c:function(t,e,i){"use strict";var n=i("ee34"),a=i.n(n);a.a},c426:function(t,e,i){"use strict";i.r(e);var n=i("6990"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},cc5a:function(t,e,i){"use strict";var n=i("4766"),a=i.n(n);a.a},ccf2:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("bd86"));i("a481");var o,s=n(i("f499")),r={WssService:"wss://api.itool.store/v1/.ws",ItoolStoreApi:"https://api.itool.store/",FileService:"https://file.help-itool.com/"},c=function(t){if(!t){var e=uni.getStorageSync("userInfo");if(e){var i=JSON.parse(e);return i.paras&&i.paras.replace(/\s*/g,"")?i.paras=JSON.parse(i.paras):i.paras={userName:"未定义",headImg:""},i}return{}}uni.setStorageSync("userInfo",(0,s.default)(t))};(function(t){t.is=function(t){return!!t&&this==t},t.Imgfiltr=function(t){return t&&this.indexOf(t)>-1?this:this.indexOf("Images_500")>-1?this.replace("ComPress/Images_500","Images"):this.indexOf("Images_120")>-1?this.replace("ComPress/Images_120","Images"):this.indexOf("Images_300")>-1?this.replace("ComPress/Images_300","Images"):this},t.Img120=function(t){return t&&this.indexOf(t)>-1?this:this.indexOf("Images_120")>-1?this:this.replace("ComPress/Images_300","Images").replace("ComPress/Images_500","Images").replace("Images","ComPress/Images_120")},t.Img300=function(t){return t&&this.indexOf(t)>-1?this:this.indexOf("Images_300")>-1?this:this.replace("ComPress/Images_120","Images").replace("ComPress/Images_500","Images").replace("Images","ComPress/Images_300")},t.Img500=function(t){if(t&&this.indexOf(t)>-1)return this;var e=this;return e.indexOf("Images_500")>-1?e:(e.indexOf("Images_120")>-1&&(e=e.replace("ComPress/Images_120","Images")),e.indexOf("Images_300")>-1&&(e=e.replace("ComPress/Images_300","Images")),e.replace("Images","ComPress/Images_500"))},t.FileSever=function(t){if(t&&this.indexOf(t)>-1)return this;if(this.indexOf("http")>-1)return this;try{return r.FileService+JSON.parse(this)[0]}catch(e){return r.FileService+this}}})(String.prototype);var l={Project:{Token:"6D7-BB91-13901823A235"},Global:{WssService:"wss://api.itool.store/v1/.ws",ItoolStoreApi:"https://api.itool.store/",FileService:"https://file.help-itool.com/",Uploader:r.FileService+"/api/upload/file"},GlobalQueue:{QueuePlus:r.ItoolStoreApi+".v1/queue/.push",QueueConfirm:r.ItoolStoreApi+".v1/queue/.Confirm",QueueFinished:r.ItoolStoreApi+".v1/queue/.Finished"},GlobalSocketUser:(o={WsByClient:r.ItoolStoreApi+".v1/socket/user/.wsbyclient",OutLoginWs:r.ItoolStoreApi+".v1/socket/user/.wsbyservice",AddMember:r.ItoolStoreApi+".v1/socket/Relationship/.member",GetMembers:r.ItoolStoreApi+".v1/socket/Relationship/"+c().id+"/"+c().projectToken,AddMemberGroup:r.ItoolStoreApi+".v1/socket/Relationship/.group",UpdateUserParas:r.ItoolStoreApi+".v1/socket/user/.paras"},(0,a.default)(o,"OutLoginWs",r.ItoolStoreApi+".v1/socket/user/.wsbyservice"),(0,a.default)(o,"GetGroupList",r.ItoolStoreApi+".v1/socket/Group/.grouplist"+c().id+"/"+c().projectToken),(0,a.default)(o,"AddGroup",r.ItoolStoreApi+".v1/socket/Group/.add"),(0,a.default)(o,"CreateGroup",r.ItoolStoreApi+".v1/socket/Group"),o),UserInfo:c,AppOnStatus:function(){var t=uni.getStorageSync("AppOnStatus");return"show"==t||"hide"!=t&&void 0}};e.default=l},cfa5:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"avator-wrapper"},[""!=t.avator?i("v-uni-view",{staticClass:"avator"},[i("img",{staticClass:"img",attrs:{src:t.avator}})]):t._e(),""==t.avator?i("v-uni-view",{staticClass:"avator-text"},[i("v-uni-text",[t._v(t._s(t.text.substr(0,2)))])],1):t._e()],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},e5cc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var n={name:"avator_group",props:{avator:String,type:Number|String,text:String}};e.default=n},ee34:function(t,e,i){var n=i("f770");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("2ed0b12d",n,!0,{sourceMap:!1,shadowMode:!1})},f770:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".avator-wrapper[data-v-48c83922]{width:%?100?%;height:%?100?%}.avator[data-v-48c83922]{width:%?100?%;height:%?100?%;border-radius:50%;overflow:hiideen;background:#f1f1f1}.avator .img[data-v-48c83922]{width:100%;height:100%;border-radius:50%}.avator-group[data-v-48c83922]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.avator-group .img[data-v-48c83922]{width:%?50?%;height:%?50?%;border-radius:50%}.avator-text[data-v-48c83922]{width:%?100?%;height:%?100?%;border-radius:50%;overflow:hiideen;background:#17a2b8;line-height:%?100?%;text-align:center;font-size:%?46?%;color:#fff}",""])},fcbf:function(t,e,i){"use strict";i.r(e);var n=i("e5cc"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a}}]);